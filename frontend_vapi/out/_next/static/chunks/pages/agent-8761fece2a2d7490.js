(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2675],{13130:(e,t,r)=>{e.exports=r(43435)},54024:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(86651).A)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},65513:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var a=r(94458),s=r(43836),n=r(54024),i=r(86651);let o=(0,i.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),l=(0,i.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var c=r(13130),d=r(41343);function u(e){let{className:t}=e,r=(0,c.useRouter)(),{logout:i}=(0,s.H)(),u=r.pathname,m=[{id:"agent",label:"Agent",icon:n.A,path:"/agent",isActive:"/agent"===u},{id:"tasks",label:"Tasks",icon:o,path:"/tasks",isActive:"/tasks"===u},{id:"logout",label:"Logout",icon:l,path:"/logout",isActive:!1}],h=(e,t)=>{if("logout"===t)return void i();r.push(e)};return(0,a.jsx)("footer",{className:(0,d.cn)("fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm border-t border-gray-200 safe-area-inset-bottom",t),children:(0,a.jsx)("nav",{className:"flex items-center justify-around px-4 py-2 max-w-md mx-auto",children:m.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>h(e.path,e.id),className:(0,d.cn)("flex flex-col items-center gap-1 p-3 rounded-xl transition-all duration-200","hover:bg-gray-100 active:scale-95",e.isActive?"bg-violet-100 text-violet-600":"text-gray-600 hover:text-gray-900"),children:[(0,a.jsx)(t,{size:20,className:(0,d.cn)("transition-transform duration-200",e.isActive&&"scale-110")}),(0,a.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.id)})})})}},66437:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/agent",function(){return r(96646)}])},92411:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var a=r(94458),s=r(68658),n=r(41343);let i=s.memo(function(e){let{size:t="md",className:r,color:s="primary"}=e;return(0,a.jsx)("div",{className:(0,n.cn)("border-2 rounded-full animate-spin",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t],{primary:"border-violet-600 border-t-transparent",white:"border-white border-t-transparent",gray:"border-gray-400 border-t-transparent"}[s],r),role:"status","aria-label":"Loading"})})},96646:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(94458),s=r(43836),n=r(68337),i=r.n(n),o=r(13130),l=r(68658),c=r(86651);let d=(0,c.A)("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var u=r(54024);let m=(0,c.A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);var h=r(41343),x=r(92411),g=r(72370);function p(e){let{className:t}=e,r=(0,o.useRouter)(),[s,n]=(0,l.useState)(null),[i,c]=(0,l.useState)(null),[p,v]=(0,l.useState)(!1),[b,f]=(0,l.useState)(null),{isRecording:y,startRecording:j,stopRecording:k,hasPermission:w,requestPermission:N,volume:A}=function(){let{onStreamData:e,onError:t,sampleRate:r=16e3,echoCancellation:a=!0,noiseSuppression:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[n,i]=(0,l.useState)(!1),[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(0),m=(0,l.useRef)(null),h=(0,l.useRef)(null),x=(0,l.useRef)(null),g=(0,l.useRef)(null),p=(0,l.useRef)(null),v=(0,l.useCallback)(async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:{sampleRate:r,echoCancellation:a,noiseSuppression:s,autoGainControl:!0}})).getTracks().forEach(e=>e.stop()),c(!0),!0}catch(e){return console.error("Failed to get microphone permission:",e),c(!1),null==t||t(e),!1}},[r,a,s,t]),b=(0,l.useCallback)(()=>{if(!g.current)return;let e=g.current,t=e.frequencyBinCount,r=new Uint8Array(t),a=()=>{n&&(e.getByteFrequencyData(r),u(Math.min(100,r.reduce((e,t)=>e+t,0)/t/255*100)),p.current=requestAnimationFrame(a))};a()},[n]),f=(0,l.useCallback)(async()=>{try{if(!o&&!await v())throw Error("Microphone permission denied");let n=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:r,echoCancellation:a,noiseSuppression:s,autoGainControl:!0}});h.current=n,x.current=new AudioContext({sampleRate:r});let l=x.current.createMediaStreamSource(n);g.current=x.current.createAnalyser(),g.current.fftSize=256,l.connect(g.current);let c=new MediaRecorder(n,{mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:128e3});m.current=c,c.ondataavailable=t=>{t.data.size>0&&e&&e(t.data)},c.onerror=e=>{console.error("MediaRecorder error:",e),null==t||t(Error("Recording failed"))},c.start(100),i(!0),b()}catch(e){console.error("Failed to start recording:",e),null==t||t(e)}},[o,v,r,a,s,e,t,b]),y=(0,l.useCallback)(()=>{m.current&&n&&(m.current.stop(),i(!1)),h.current&&(h.current.getTracks().forEach(e=>e.stop()),h.current=null),x.current&&(x.current.close(),x.current=null),p.current&&(cancelAnimationFrame(p.current),p.current=null),u(0)},[n]);return(0,l.useEffect)(()=>()=>{y()},[y]),(0,l.useEffect)(()=>{navigator.permissions.query({name:"microphone"}).then(e=>{c("granted"===e.state)}).catch(()=>{})},[]),{isRecording:n,startRecording:f,stopRecording:y,hasPermission:o,requestPermission:v,volume:d}}({onStreamData:e=>{i&&i.readyState===WebSocket.OPEN&&i.send(e)},onError:e=>{f("Recording error: ".concat(e.message))}}),M=(0,l.useCallback)(async()=>{try{f(null),v(!0),console.log("Demo mode: Starting voice session simulation"),setTimeout(()=>{v(!1),j()},2e3)}catch(e){console.error("Recording start error:",e),f("Failed to start recording: ".concat(e instanceof Error?e.message:"Unknown error")),v(!1)}},[j]),E=(0,l.useCallback)(async()=>{try{k(),setTimeout(()=>{r.push("/tasks")},1e3)}catch(e){console.error("Recording stop error:",e),f("Failed to stop recording: ".concat(e instanceof Error?e.message:"Unknown error"))}},[k,r]);return(0,l.useEffect)(()=>{let e=e=>{"Space"!==e.code||p||(e.preventDefault(),y?E():M())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[y,p,M,E]),(0,l.useEffect)(()=>()=>{i&&i.close(),y&&k()},[i,y,k]),(0,a.jsxs)("div",{className:(0,h.cn)("flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-violet-50 to-indigo-100 p-6",t),children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Chat with Agent"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Press the mic button to start conversation"})]}),(0,a.jsxs)("div",{className:"relative mb-8",children:[y&&(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-violet-300 animate-pulse",style:{transform:"scale(".concat(1+A/100,")"),opacity:y?.3+A/100*.7:1}}),(0,a.jsx)(g.$,{size:"lg",variant:y?"destructive":"default",className:(0,h.cn)("w-24 h-24 rounded-full shadow-lg transition-all duration-300",y?"bg-red-500 hover:bg-red-600 scale-110":"bg-violet-600 hover:bg-violet-700",p&&"opacity-75 cursor-not-allowed"),onClick:y?E:M,disabled:p,"aria-label":p?"Connecting...":y?"Stop recording":"Start recording","aria-pressed":y,children:p?(0,a.jsx)(x.k,{size:"lg",color:"white"}):y?(0,a.jsx)(d,{size:32}):(0,a.jsx)(u.A,{size:32})})]}),(0,a.jsx)("div",{className:"text-center mb-6",children:p?(0,a.jsx)("p",{className:"text-violet-600 font-medium",children:"Connecting..."}):y?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-red-600 font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Recording"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Press the button again to stop recording"})]}):(0,a.jsx)("p",{className:"text-gray-600",children:"Press the button to start recording"})}),y&&(0,a.jsx)("div",{className:"w-64 bg-gray-200 rounded-full h-2 mb-6",children:(0,a.jsx)("div",{className:"bg-violet-600 h-2 rounded-full transition-all duration-100",style:{width:"".concat(Math.min(100,A),"%")}})}),b&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg max-w-md text-center",children:[(0,a.jsx)("p",{className:"text-sm",children:b}),"            ",(0,a.jsx)(g.$,{variant:"ghost",size:"sm",className:"mt-2 text-red-600 hover:text-red-700",onClick:()=>f(null),children:"Close"})]}),(0,a.jsx)("div",{className:"mt-12 text-center max-w-md",children:(0,a.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center justify-center gap-2",children:[(0,a.jsx)(m,{size:16}),"How to use"]}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1 text-left",children:[(0,a.jsx)("li",{children:"• Press mic button or spacebar to start recording"}),(0,a.jsx)("li",{children:"• Have a natural conversation with the agent"}),(0,a.jsx)("li",{children:"• Press the button again to stop recording"}),(0,a.jsx)("li",{children:"• Automatically navigate to tasks screen"})]})]})})]})}var v=r(65513);function b(){let e=(0,o.useRouter)(),{authenticated:t}=(0,s.H)();return((0,l.useEffect)(()=>{t||e.push("/")},[t,e]),t)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Voice Agent \xb7 VAPI"}),(0,a.jsx)("meta",{name:"description",content:"Have a voice conversation with your AI agent"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 pb-20",children:[(0,a.jsx)(p,{}),(0,a.jsx)(v.i,{})]})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(66437)),_N_E=e.O()}]);